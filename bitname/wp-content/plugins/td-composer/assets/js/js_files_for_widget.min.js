var tdcAdminIFrameUI;
(function(e,b,d,a){tdcAdminIFrameUI={_liveIframeWindowObject:a,_$liveIframe:a,getIframeWindow:function(){d.isUndefined(tdcAdminIFrameUI._liveIframeWindowObject)&&new tdcNotice.notice("tdcAdminIFrameUI._liveIframeWindowObject is undefined. AKA: The iFrame window object is undefined. The iFrame was probably not added to the page!",!0,!1);return tdcAdminIFrameUI._liveIframeWindowObject},getLiveIframe:function(){return tdcAdminIFrameUI._$liveIframe},evalInIframe:function(c){tdcAdminIFrameUI.getIframeWindow().eval(c)},initContent:function(c){c.find(".tdc-row").length||
(c.find(".tdc-content-wrap").prepend('<div class="tdc-row"><div class="vc_row wpb_row td-pb-row"><div class="tdc-column"><div class="td-pb-span12 wpb_column vc_column_container"><div class="wpb_wrapper"></div></div></div></div></div>'),window.tdcPostSettings.postContent+="[vc_row][vc_column][/vc_column][/vc_row]")},init:function(){window.addWrappers=function(a){a=a.find(".td-main-content-wrap");a.find(".tdc-row").wrapAll('<div id="tdc-rows"></div>').each(function(a,c){e(c).find(".tdc-column").wrapAll('<div class="tdc-columns"></div>')});
a.find(".tdc-column").each(function(a,c){var b=e(c);b.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');b=b.find(".td_block_wrap");window.checkTdBlockWrap(b);b.wrap('<div class="tdc-element"></div>')});a.find(".tdc-inner-row").each(function(a,c){e(c).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,c){var b=e(c).find(".tdc-element");b.length?b.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=e(c).find(".wpb_wrapper"),
b.length&&b.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-element, .tdc-element-inner-row").each(function(a,c){var b=e(c);b.length&&b.not(".tdc-element-inner-column").addClass("tdc-element-column")});a.find(".tdc-column").each(function(a,c){var b=e(c).find(".tdc-element, .tdc-element-inner-row");b.length?b.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=e(c).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))});a.find(".tdc-elements:empty").each(function(a,
c){var b="",f=e(c);f.closest(".tdc-inner-column").length?b=" tdc-element-inner-column":f.closest(".tdc-column").length&&(b=" tdc-element-column");b=e('<div class="'+tdcOperationUI._emptyElementClass+b+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(b);f.append(b)})};window.addRowWrappers=function(a){a.find(".tdc-column").wrapAll('<div class="tdc-columns"></div>');a.find(".tdc-column").each(function(a,c){var b=e(c);b.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');
b=b.find(".td_block_wrap");window.checkTdBlockWrap(b);b.wrap('<div class="tdc-element"></div>')});a.find(".tdc-inner-row").each(function(a,c){e(c).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,c){var b=e(c).find(".tdc-element");b.length?b.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=e(c).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-element, .tdc-element-inner-row").each(function(a,
c){var b=e(c);b.length&&b.not(".tdc-element-inner-column").addClass("tdc-element-column")});a.find(".tdc-column").each(function(a,c){var b=e(c).find(".tdc-element, .tdc-element-inner-row");b.length?b.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=e(c).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))});a.find(".tdc-elements:empty").each(function(a,c){var b="",f=e(c);f.closest(".tdc-inner-column").length?b=" tdc-element-inner-column":f.closest(".tdc-column").length&&
(b=" tdc-element-column");b=e('<div class="'+tdcOperationUI._emptyElementClass+b+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(b);f.append(b)})};window.addColumnWrappers=function(a){a.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');var c=a.find(".td_block_wrap");window.checkTdBlockWrap(c);c.wrap('<div class="tdc-element"></div>');a.find(".tdc-inner-row").each(function(c,a){e(a).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,
c){var b=e(c).find(".tdc-element");b.length?b.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=e(c).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-element, .tdc-element-inner-row").each(function(c,a){var b=e(a);b.length&&b.not(".tdc-element-inner-column").addClass("tdc-element-column")});c=a.find(".tdc-element, .tdc-element-inner-row");c.length?c.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):
(c=a.find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'));a.find(".tdc-elements:empty").each(function(c,a){var b="",f=e(a);f.closest(".tdc-inner-column").length?b=" tdc-element-inner-column":f.closest(".tdc-column").length&&(b=" tdc-element-column");b=e('<div class="'+tdcOperationUI._emptyElementClass+b+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(b);f.append(b)})};window.addInnerRowWrappers=function(a){var c=a.find(".td_block_wrap");
window.checkTdBlockWrap(c);c.wrap('<div class="tdc-element"></div>');a.find(".tdc-inner-row").each(function(a,c){e(c).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,c){var b=e(c).find(".tdc-element");b.length?b.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=e(c).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-elements:empty").each(function(c,a){var b="",f=e(a);f.closest(".tdc-inner-column").length?
b=" tdc-element-inner-column":f.closest(".tdc-column").length&&(b=" tdc-element-column");b=e('<div class="'+tdcOperationUI._emptyElementClass+b+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(b);f.append(b)})};window.addInnerColumnWrappers=function(c){var a=c.find(".td_block_wrap");window.checkTdBlockWrap(a);a.wrap('<div class="tdc-element"></div>');a=c.find(".tdc-element");a.length?a.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):
(a=c.find(".wpb_wrapper"),a.length&&a.append('<div class="tdc-elements"></div>'));c.find(".tdc-elements:empty").each(function(a,c){var b="",f=e(c);f.closest(".tdc-inner-column").length?b=" tdc-element-inner-column":f.closest(".tdc-column").length&&(b=" tdc-element-column");b=e('<div class="'+tdcOperationUI._emptyElementClass+b+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(b);f.append(b)})};window.checkTdBlockWrap=function(a){a.each(function(a,c){var b=
e(c);0===parseInt(b.height())&&b.addClass("tdc-block-empty")})};var c=window.tdcPostSettings.postMetaVcJsStatus,a=window.tdcPostSettings.postContent;"1"!==window.tdcPostSettings.postMetaDirtyContent&&"true"!==c||""===a||new tdcNotice.notice("The current content page hasn't been created by TagDiv Composer!",!1,!1);tdcAdminIFrameUI.checkIframe(tdcAdminIFrameUI._$liveIframe)},loadIframe:function(){var c=e(this).contents();tdcAdminIFrameUI.initContent(c);tdcAdminIFrameUI._liveIframeWindowObject=e(this).get(0).contentWindow;
var b=e('<div id="tdc-recycle"><div class="tdc-delete-text"><span>Delete</span></div></div>');c.find("body").prepend(b);tdcAdminWrapperUI.$recycle=b;tdcIFrameData._postOriginalContentJSON=a;window.addWrappers(c);tdcIFrameData.init(c,!0);tdcOperationUI.init(c,!0);c.on("click","a",function(a){a.preventDefault();"undefined"!==this.href&&window.open(this.href,"_blank")});c[0].addEventListener("mousedown",function(a){1!==a.which&&a.stopPropagation()},!0);c[0].addEventListener("mousemove",function(a){c.lastMouseEvent=
a},!0)},checkIframe:function(c){if(d.isUndefined(c))c=window.tdcPostSettings.postUrl,c=0>c.indexOf("?")?c+("?td_action=tdc_edit&post_id="+window.tdcPostSettings.postId):c+("&td_action=tdc_edit&post_id="+window.tdcPostSettings.postId),c=e('<iframe id="tdc-live-iframe" name="tdc-live-iframe" src="'+c+'" scrolling="auto" style="width: 100%; height: 100%"></iframe>').load(tdcAdminIFrameUI.loadIframe),e("#tdc-live-iframe-wrapper").append(c);else{var b=c,f=b.contents();tdcAdminIFrameUI.initContent(f);tdcAdminIFrameUI._liveIframeWindowObject=
b.get(0).contentWindow;b=e('<div id="tdc-recycle"><div class="tdc-delete-text"><span>Delete</span></div></div>');f.find("body").prepend(b);tdcAdminWrapperUI.$recycle=b;tdcIFrameData._postOriginalContentJSON=a;window.addWrappers(f);tdcIFrameData.init(f,!0);tdcOperationUI.init(f,!0);f.find("a").each(function(a,c){c.setAttribute("target","_blank")});c.removeClass("tdc-live-iframe");c.removeClass("tdc-live-iframe-temp")}tdcAdminIFrameUI._$liveIframe=c}}})(jQuery,Backbone,_);var tdcCssEditor={};
(function(e,b,d){tdcCssEditor={_mappedParameter:d,_model:d,_currentViewportSettings:{name:"all",settings:d},_currentCssSettings:d,_INHERITED_CSS_CLASS:"tdc-css-inherited",_INACTIVE_CSS_CLASS:"tdc-css-inactive",_isInitialized:!1,init:function(){tdcCssEditor._isInitialized||(tdcCssEditor._bindEvents(),tdcCssEditor._isInitialized=!0)},tdcCssImageWrapHandler:function(a){var c=e(a.currentTarget),k=c.closest(".tdc-tab-content");window.original_send_to_editor=window.send_to_editor;wp.media.editor.open(c);
e(".media-menu .media-menu-item:nth-of-type(2)").addClass("hidden");e(".media-menu .media-menu-item:nth-of-type(3)").addClass("hidden");e(".media-menu .media-menu-item:nth-of-type(4)").addClass("hidden");window.send_to_editor=function(a){var f=e("img",a).attr("src"),d="";"undefined"===typeof f?(f=e(a).attr("src"),d=e(a).attr("class")):d=e("img",a).attr("class");e.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_id","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",
window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_class:d,action:"tdc_ajax_get_image_id"}}).done(function(a,d,h){if("success"===d)if(b.isObject(a)&&b.has(a,"errors"))new tdcNotice.notice(a.errors,!0,!1);else{d=c.closest(".tdc-property-wrap");h=d.find(".tdc-css-image-remove");var g=d.find(".tdc-inherit-image");h.removeClass("tdc-hidden-button");"all"===tdcCssEditor._currentViewportSettings.name?g.hide():g.show();c.attr("style","background-image: url( '"+f+"') ");c.data("image_link",
f);c.data("image_id",a.image_id);window.send_to_editor=window.original_send_to_editor;window.tb_remove();d.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);"undefined"===typeof c.data("model_id")?tdcCssEditor.saveWidgetForm(c):(a=tdcCssEditor._generateCssAttValue(k),d=tdcIFrameData.getModel(c.data("model_id")),tdcSidebarController.onUpdate(d,c.data("param_name"),"",a))}}).fail(function(a,c,b){})};return!1},tdcCssImageRemoveHandler:function(a){var c=e(a.currentTarget),d=c.closest(".tdc-property-wrap");
a=d.find(".tdc-css-image-wrap");var f=d.find(".tdc-inherit-image");c.addClass("tdc-hidden-button");"all"!==tdcCssEditor._currentViewportSettings.name&&f.show();d.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);a.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'");"all"===tdcCssEditor._currentViewportSettings.name?a.data("image_link",""):a.data("image_link","no_value");f=a.data("model_id");b.isUndefined(f)?tdcCssEditor.saveWidgetForm(c):(c=
d.closest(".tdc-tab-content"),c=tdcCssEditor._generateCssAttValue(c),f=tdcIFrameData.getModel(f),tdcSidebarController.onUpdate(f,a.data("param_name"),"",c))},_updateColorField:function(a){var c=a.closest(".tdc-property-wrap"),d=c.data("tdc-for"),f=c.find(".tdc-inherit-color"),h=c.find(".wp-color-result"),e=a.data("no_value"),n=a.data("default_value");b.isUndefined(e)||1!==e?("all"!==tdcCssEditor._currentViewportSettings.name&&f.show(),tdcCssEditor._updateData(a),f={isInherited:!1},d=tdcCssEditor._getSettingsProperty(d,
"",f),f.isInherited?(a.attr("placeholder",d),a.val(""),c.addClass(tdcCssEditor._INHERITED_CSS_CLASS),h.attr("style","background-color: "+tdcCssEditor._getRgba(d))):(c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),tdcCssEditor._checkDefaultColor(a))):(a.val("no_value"),tdcCssEditor._updateData(a),a.val(""),b.isUndefined(n)||h.attr("style","background-color: "+tdcCssEditor._getRgba(n)),tdcCssEditor._checkDefaultColor(a))},_clearColorPicker:function(a){a=e(a.currentTarget).closest(".tdc-property-wrap");
var c=a.closest(".tdc-tab-content"),b=a.find("input.wp-color-picker"),d=a.find(".tdc-inherit-color");a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);"all"!==tdcCssEditor._currentViewportSettings.name&&(b.data("no_value",1),b.attr("placeholder",""),d.show());tdcCssEditor._checkDefaultColor(b);c.hasClass("tdc-tab-widget")&&(b.val(""),b.trigger("keyup"))},_showColorPicker:function(a){a=e(a.currentTarget).closest(".tdc-property-wrap").find("input.wp-color-picker");"no_value"===a.val()&&a.val("")},_changeColor:function(a){var c=
e(a.currentTarget).closest(".wp-picker-container").find("input.wp-color-picker");""!==c.val()&&c.data("no_value",0);"keyup"===a.type?setTimeout(function(){tdcCssEditor._updateColorField(c)},100):tdcCssEditor._updateColorField(c)},_inheritSelect:function(a){a=e(a.currentTarget);var c=a.closest(".tdc-property-wrap"),k=c.data("tdc-for");b.isUndefined(tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name][k])||delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name][k];
var f={isInherited:!1},k=tdcCssEditor._getSettingsProperty(k,d,f),h=c.find("select:first");f.isInherited?(c.addClass(tdcCssEditor._INHERITED_CSS_CLASS),a.hide()):(c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),a.show());b.isUndefined(k)?(h.val(h.find("option:first").val()),a.hide()):h.val(k);tdcCssEditor._updateData(h)},_inheritColor:function(a){a=e(a.currentTarget);var c=a.closest(".tdc-property-wrap"),k=c.find(".wp-color-picker"),f=c.find(".wp-color-result"),h=c.data("tdc-for");b.isUndefined(tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name][h])||
delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name][h];k.data("no_value",0);var m={isInherited:!1},h=tdcCssEditor._getSettingsProperty(h,d,m);m.isInherited?(c.addClass(tdcCssEditor._INHERITED_CSS_CLASS),a.hide()):(c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),a.show());b.isUndefined(h)?(k.val(""),a.hide(),tdcCssEditor._updateData(k),tdcCssEditor._checkDefaultColor(k)):(k.val(""),k.attr("placeholder",h),f.attr("style","background-color: "+tdcCssEditor._getRgba(h)),
tdcCssEditor._updateData(k))},_inheritImage:function(a){var c=e(a.currentTarget);a=c.closest(".tdc-property-wrap");var k=a.find(".tdc-css-image-wrap"),f=a.find(".tdc-css-image-remove");a.find(".tdc-inherit-image").hide();f.addClass("tdc-hidden-button");k.data("image_link","");f=k.data("model_id");b.isUndefined(f)?tdcCssEditor.saveWidgetForm(c):(c=a.closest(".tdc-tab-content"),c=tdcCssEditor._generateCssAttValue(c),f=tdcIFrameData.getModel(f),tdcSidebarController.onUpdate(f,k.data("param_name"),"",
c));f={isInherited:!1};c=tdcCssEditor._getSettingsProperty("background-image",d,f);f.isInherited?(a.addClass(tdcCssEditor._INHERITED_CSS_CLASS),k.attr("style","background-image: url('"+c+"'")):k.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'")},_clearCssProperties:function(a){a=e(a.currentTarget);var c=a.data("model_id");tdConfirm.showModal("Clear CSS settings",tdcCssEditor,function(a,c){tdcCssEditor._currentCssSettings=d;if("undefined"===
typeof c)e(".tdc-responsiveness").replaceWith(tdcCssEditor._generateEditorResponsiveContent()),tdcCssEditor.doActionPanelRender(),tdcCssEditor.saveWidgetForm(e("."+a.get(0).className));else{var b=tdcIFrameData.getModel(c);tdcSidebarController.onUpdate(b,a.data("param_name"),"","");e(".tdc-responsiveness").replaceWith(tdcCssEditor._generateEditorResponsiveContent());tdcCssEditor.doActionPanelRender()}tb_remove()},[a,c],"Are you sure you want to clear all the CSS settings of the selected component?")},
_changeTextInput:function(a){var c=e(a.currentTarget),d=c.parent(),f=c;d.hasClass("tdc-box-margin")||d.hasClass("tdc-box-border")||d.hasClass("tdc-box-padding")||(f=c.closest(".tdc-property-wrap"));var d=c.val(),h=1;c.hasClass("tdc-css-opacity")&&(h=.01);var m=NaN;switch(a.type){case "keyup":switch(a.keyCode){case 38:e.isNumeric(d)&&(m=parseFloat(d)+h);break;case 40:e.isNumeric(d)&&(m=parseFloat(d)-h)}break;case "mousewheel":e.isNumeric(d)&&(m=0<a.originalEvent.deltaY?parseFloat(d)-h:parseFloat(d)+
h)}b.isNaN(m)||(1>h&&(m=m.toFixed(2)),c.val(m));tdcCssEditor._updateData(c);d=f.data("tdc-for");a={isInherited:!1};d=tdcCssEditor._getSettingsProperty(d,"",a);a.isInherited?(c.attr("placeholder",d),c.val(""),f.addClass(tdcCssEditor._INHERITED_CSS_CLASS)):f.removeClass(tdcCssEditor._INHERITED_CSS_CLASS)},_keydownTextInput:function(a){if(38===a.keyCode||40===a.keyCode)return!1},_focusTextInput:function(a){a=e(a.currentTarget);for(var c=a.closest(".tdc-property-wrap"),b=c[0].classList,d=0;d<b.length;d++)b[d].startsWith("tdc-el-")&&
c.removeClass(b[d]);c.addClass("tdc-el-"+a.data("tdc-for"))},_changeDropDown:function(a){a=e(a.currentTarget);var c=a.closest(".tdc-property-wrap"),d=c.find(".tdc-inherit-select");c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);tdcCssEditor._updateData(a);var f=c.data("tdc-for"),h={isInherited:!1};tdcCssEditor._getSettingsProperty(f,"",h);h.isInherited?(c.addClass(tdcCssEditor._INHERITED_CSS_CLASS),d.hide()):(c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),"all"===tdcCssEditor._currentViewportSettings.name?
d.hide():0===a[0].selectedIndex?b.isUndefined(tdcCssEditor._currentCssSettings.all)||b.isUndefined(tdcCssEditor._currentCssSettings.all[f])?d.hide():d.show():d.show())},doActionPanelRender:function(){tdcSidebarPanel._hook.doAction("panel_rendered");tdcSidebarPanel._hook.doAction("panel_css")},_bindEvents:function(){var a=e("body");a.on("keydown",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._keydownTextInput);a.on("keyup mousewheel",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._changeTextInput);
a.on("focus",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._focusTextInput);a.on("change keyup",".tdc-tab-design .tdc-css-bg-color",tdcCssEditor._changeColor);a.on("change keyup",".tdc-tab-design .tdc-css-border-color",tdcCssEditor._changeColor);a.on("change",".tdc-tab-design .tdc-css-border-style",tdcCssEditor._changeDropDown);a.on("keydown",".tdc-tab-design input.tdc-css-border-radius",tdcCssEditor._keydownTextInput);a.on("keyup mousewheel",".tdc-tab-design input.tdc-css-border-radius",
tdcCssEditor._changeTextInput);a.on("change",".tdc-tab-design .tdc-css-bg-style",tdcCssEditor._changeDropDown);a.on("change",".tdc-tab-design .tdc-css-bg-position",tdcCssEditor._changeDropDown);a.on("keydown",".tdc-tab-design input.tdc-css-opacity",tdcCssEditor._keydownTextInput);a.on("keyup mousewheel",".tdc-tab-design input.tdc-css-opacity",tdcCssEditor._changeTextInput);a.on("change keyup",".tdc-tab-design input.tdc-css-color-1-overlay",tdcCssEditor._changeColor);a.on("change keyup",".tdc-tab-design input.tdc-css-color-2-overlay",
tdcCssEditor._changeColor);a.on("mousedown",".tdc-tab-design .wp-picker-clear",tdcCssEditor._clearColorPicker);a.on("mousedown",".tdc-tab-design .wp-color-result",tdcCssEditor._showColorPicker);a.on("click",".tdc-tab-design .tdc-inherit-select",tdcCssEditor._inheritSelect);a.on("click",".tdc-tab-design .tdc-inherit-color",tdcCssEditor._inheritColor);a.on("click",".tdc-tab-design .tdc-css-image-wrap",tdcCssEditor.tdcCssImageWrapHandler);a.on("click",".tdc-tab-design .tdc-css-image-remove",tdcCssEditor.tdcCssImageRemoveHandler);
a.on("click",".tdc-tab-design .tdc-inherit-image",tdcCssEditor._inheritImage);a.on("click",".tdc-clear-css-properties",tdcCssEditor._clearCssProperties);a.on("click",".tdc-tab-design .tdc-responsive-buttons > div",function(a){var c,f=e(this);f.addClass("selected");f.siblings().removeClass("selected");var h="undefined"===typeof window.td_viewport_interval_list?tdcAdminIFrameUI._liveIframeWindowObject.td_viewport_interval_list:window.td_viewport_interval_list;a=tdcAdminIFrameUI.getLiveIframe();b.isUndefined(a)||
(c=a.contents().find(".tdc-element-selected").offset().top-a.contents().scrollTop());f.hasClass("tdc-responsive-all")?(tdcCssEditor._currentViewportSettings={name:"all",settings:d},b.isUndefined(a)||a.css("width","100%")):f.hasClass("tdc-responsive-tablet-landscape")?(tdcCssEditor._currentViewportSettings={name:"landscape",settings:{limitTop:h[2].limitBottom,limitBottom:parseInt(h[1].limitBottom)+1}},b.isUndefined(a)||a.css("width",tdcCssEditor._currentViewportSettings.settings.limitTop)):f.hasClass("tdc-responsive-tablet-portrait")?
(tdcCssEditor._currentViewportSettings={name:"portrait",settings:{limitTop:h[1].limitBottom,limitBottom:parseInt(h[0].limitBottom)+1}},b.isUndefined(a)||a.css("width",tdcCssEditor._currentViewportSettings.settings.limitTop)):f.hasClass("tdc-responsive-phone")&&(tdcCssEditor._currentViewportSettings={name:"phone",settings:{limitTop:h[0].limitBottom,limitBottom:d}},b.isUndefined(a)||a.css("width",tdcCssEditor._currentViewportSettings.settings.limitTop-300));e(".tdc-responsiveness").replaceWith(tdcCssEditor._generateEditorResponsiveContent());
tdcCssEditor.doActionPanelRender();b.isUndefined(a)||(f=a.contents().find(".tdc-element-selected"),f.length&&(f=f.offset().top,f=0<c?window.innerHeight>c?f-c:f-100:f-100,a.contents().scrollTop(f)))})},_updateData:function(a){var c=a.data("model_id"),b=a.data("param_name"),d=a.closest(".tdc-tab-content");"undefined"===typeof c?tdcCssEditor.saveWidgetForm(a):(a=tdcIFrameData.getModel(c),d=tdcCssEditor._generateCssAttValue(d),tdcSidebarController.onUpdate(a,b,"",d))},saveWidgetForm:function(a){var c=
a.closest("form");a=a.closest(".tdc-tab-content");if(c.length){var b=c.find('input[name="id_base"]').val(),d=c.find('input[name="widget-id"]').val().replace(b+"-",""),b="'widget-"+b+"["+d+"][tdc_css]'",d=c.find("input[name="+b+"]"),h=tdcCssEditor._generateCssAttValue(a);a.data("tdc_css",h);d.length?d.val(h):c.append('<input type="hidden" name='+b+' value="'+h+'">')}},addWidgetCssEditor:function(a,c){tdcCssEditor._mappedParameter=a;return tdcCssEditor._generateEditorContent(c)},addComposerCssEditor:function(a,
c){tdcCssEditor._mappedParameter=a;tdcCssEditor._model=c;var b=c.get("attrs")[a.param_name];return tdcCssEditor._generateEditorContent(b)},_CsWpColorPicker:function(a){var c=a.closest(".tdc-property-wrap");a.cs_wpColorPicker();c.find(".wp-color-result");c.hasClass(tdcCssEditor._INHERITED_CSS_CLASS)?(c=c.find(".wp-color-result"),""!==a.attr("placeholder")&&c.attr("style","background-color: "+tdcCssEditor._getRgba(a.attr("placeholder")))):("no_value"===a.val()&&a.val(""),tdcCssEditor._checkDefaultColor(a))},
_checkDefaultColor:function(a){var c=a.closest(".tdc-property-wrap").find(".wp-color-result");""===a.val()&&(a=a.data("default_value"),b.isUndefined(a)?c.attr("style",""):c.attr("style","background-color: "+tdcCssEditor._getRgba(a)))},_generateEditorContent:function(a){if(b.isEmpty(a))tdcCssEditor._currentCssSettings=d;else try{var c=JSON.parse(window.atob(a));tdcDebug.log(c);b.isObject(c)?tdcCssEditor._currentCssSettings=c:tdcCssEditor._currentCssSettings=d}catch(h){tdcCssEditor._currentCssSettings=
d,new tdcNotice.notice(h.message,!1,!1)}tdcSidebarPanel._hook.addAction("panel_rendered",function(){e(".tdc-css-image-wrap").each(function(a,c){var f=e(c),k=f.closest(".tdc-property-wrap"),h=k.find(".tdc-css-image-remove"),m=k.find(".tdc-inherit-image"),r={isInherited:!1},u=tdcCssEditor._getSettingsProperty("background-image",d,r);r.isInherited?k.addClass(tdcCssEditor._INHERITED_CSS_CLASS):k.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);b.isUndefined(u)?(h.addClass("tdc-hidden-button"),m.hide()):
("no_value"===u?h.addClass("tdc-hidden-button"):(h.removeClass("tdc-hidden-button"),f.attr("style",'background-image: url("'+u+'")')),"all"!==tdcCssEditor._currentViewportSettings.name&&m.show());f.data("image_link",u)});e(".tdc-inherit").each(function(a,c){var f=e(c),k=f.closest(".tdc-property-wrap");if("all"===tdcCssEditor._currentViewportSettings.name||k.hasClass(tdcCssEditor._INHERITED_CSS_CLASS))f.hide();else{var h=k.data("tdc-for"),k={isInherited:!1},h=tdcCssEditor._getSettingsProperty(h,d,
k);k.isInherited?f.hide():b.isUndefined(h)||f.show()}})});var k=c="",f="";a="";switch(tdcCssEditor._currentViewportSettings.name){case "all":c="selected";break;case "landscape":k="selected";break;case "portrait":f="selected";break;case "phone":a="selected"}c='<div class="tdc-responsive-buttons">'+('<div class="tdc-responsive-all '+c+'" title="Desktop viewport"><span class="tdc-all-icon"></span></div>')+('<div class="tdc-responsive-tablet-landscape '+k+'" title="Landscape viewport"><span class="tdc-tablet-landscape-icon"></span></div>')+
('<div class="tdc-responsive-tablet-portrait '+f+'" title="Portrait viewport"><span class="tdc-tablet-portrait-icon"></span></div>');c+='<div class="tdc-responsive-phone '+a+'" title="Phone viewport"><span class="tdc-phone-icon"></span></div>';c+="</div>";return c+=tdcCssEditor._generateEditorResponsiveContent()},_cleanCss:function(a,c){if("undefined"===typeof c)return d;if("no_value"===c)return c;if("background-image"===a){var k=/(url\s*\(\s*['"]?)(.*?)\s*(['"]?\s*\))/ig.exec(c);return b.isEmpty(k)?
"":k[2]}c=c.toLowerCase();c=c.replace(/!important|px/g,"");return c.trim()},_getDataNoValue:function(a){var c="";"no_value"===a&&(c=' data-no_value="1" ');return c},_generateEditorResponsiveContent:function(){function a(){return n={isInherited:!1}}function c(a){return"all"!==tdcCssEditor._currentViewportSettings.name?'placeholder="'+a+'"':""}function k(){return n.isInherited?" "+tdcCssEditor._INHERITED_CSS_CLASS:""}function f(c,d){var f=tdcCssEditor._getSettingsProperty(c,d,a()),g="-",e="";n.isInherited&&
(g=f,f="");b.isUndefined(m)||"margin-left"!==c&&"margin-right"!==c||(e=m.get("tag"),e="vc_column"===e||"vc_column_inner"===e?" "+tdcCssEditor._INACTIVE_CSS_CLASS:"");return'<input data-tdc-for="'+c+'" name="" type="text" value="'+f+'" class="tdc-css-box-input tdc-css-box-input-'+c+k()+e+'" title="Css '+c+'" placeholder="'+g+'" '+tdcSidebarPanel._getParamterDataAtts(h,m)+"/>"}tdcSidebarPanel._hook.removeAction("panel_css");var h=tdcCssEditor._mappedParameter,m=tdcCssEditor._model,n={isInherited:!1};
var g='<div class="tdc-responsiveness">'+('<div class="'+tdcSidebarPanel._getParameterClasses(h)+'">');g=g+'<div class="tdc-box-margin"><div class="tdc-margin-label">Margin</div>'+f("margin-top","");g+=f("margin-right","");g+=f("margin-bottom","");g+=f("margin-left","");g=g+'<div class="tdc-box-border"><div class="tdc-border-label">Border</div>'+f("border-top-width","");g+=f("border-right-width","");g+=f("border-bottom-width","");g+=f("border-left-width","");g=g+'<div class="tdc-box-padding"><div class="tdc-padding-label">Padding</div>'+
f("padding-top","");g+=f("padding-right","");g+=f("padding-bottom","");g+=f("padding-left","");g+="</div></div></div></div>";var l=tdcCssEditor._getSettingsProperty("border-style",d,a());g+='<div class="tdc-property-wrap tdc-border-style tdc-dropdown-big'+k()+'" data-tdc-for="border-style">';g=g+'<div class="tdc-property-title"><span title="Css border-style">Border style<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+('<select class="tdc-css-border-style" '+
tdcSidebarPanel._getParamterDataAtts(h,m)+' name="">');g+=tdcCssEditor._generateDropdownOptions([{value:"solid",display:"Solid"},{value:"dotted",display:"Dotted"},{value:"dashed",display:"Dashed"},{value:"none",display:"None"},{value:"hidden",display:"Hidden"},{value:"double",display:"Double"},{value:"groove",display:"Groove"},{value:"ridge",display:"Ridge"},{value:"inset",display:"Inset"},{value:"outset",display:"Outset"},{value:"initial",display:"Initial"},{value:"inherit",display:"Inherit"}],l);
g+="</select></div></div>";var q=b.uniqueId(),l=tdcCssEditor._getSettingsProperty("border-color","",a()),r="";n.isInherited&&(r=l,l="");g+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-border-color'+k()+'" data-tdc-for="border-color">';g=g+'<div class="tdc-property-title"><span title="Css border-color">Border color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property">'+('<input class="tdc-css-border-color" '+tdcSidebarPanel._getParamterDataAtts(h,
m)+tdcCssEditor._getDataNoValue(l)+' data-default_value="#888888" id="'+q+'" name="" type="text" '+c(r)+' value="'+l+'"/>');g+="</div></div>";tdcSidebarPanel._hook.addAction("panel_css",function(){tdcCssEditor._CsWpColorPicker(e("#"+q))});l=tdcCssEditor._getSettingsProperty("border-radius","",a());r="";n.isInherited&&(r=l,l="");g+='<div class="tdc-property-wrap tdc-border-radius tdc-textfield-small'+k()+'" data-tdc-for="border-radius">';g=g+'<div class="tdc-property-title"><span title="Css border-radius">Border radius</span></div><div class="tdc-property">'+
('<input class="tdc-css-border-radius" '+tdcSidebarPanel._getParamterDataAtts(h,m)+' name="" type="text" '+c(r)+' value="'+l+'"/>');g+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator "></div>';var u=b.uniqueId(),l=tdcCssEditor._getSettingsProperty("background-color","",a()),r="";n.isInherited&&(r=l,l="");g+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-bg-color'+k()+'" data-tdc-for="background-color">';
g=g+'<div class="tdc-property-title"><span title="Css background-color">Background color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property">'+('<input class="tdc-css-bg-color" '+tdcSidebarPanel._getParamterDataAtts(h,m)+tdcCssEditor._getDataNoValue(l)+' id="'+u+'" name="" type="text" '+c(r)+' value="'+l+'"/>');g+="</div></div>";tdcSidebarPanel._hook.addAction("panel_css",function(){tdcCssEditor._CsWpColorPicker(e("#"+u))});tdcCssEditor._getSettingsProperty("background-image",
d,a());g+='<div class="tdc-property-wrap tdc-property-attach_image'+k()+'">';g=g+'<div class="tdc-property-title"><span title="Css background-image">Background image<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-image"></div></span></div><div class="tdc-property">'+('<div class="tdc-css-bg-image tdc-css-image-wrap " '+tdcSidebarPanel._getParamterDataAtts(h,m)+" style=\"background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png' )\"></div>");
g+='<a class="tdc-css-image-remove tdc-hidden-button" href="#" >Remove</a></div></div>';l=tdcCssEditor._getSettingsProperty("background-style",d,a());g+='<div class="tdc-property-wrap tdc-bg-style tdc-dropdown-big'+k()+'" data-tdc-for="background-style">';g=g+'<div class="tdc-property-title"><span title="Css background-size & background-repeat">Background style<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+('<select class="tdc-css-bg-style" '+
tdcSidebarPanel._getParamterDataAtts(h,m)+' name="">');g+=tdcCssEditor._generateDropdownOptions([{value:"cover",display:"Cover"},{value:"contain",display:"Contain"},{value:"no-repeat",display:"No repeat"},{value:"repeat",display:"Repeat"}],l);g+="</select></div></div>";l=tdcCssEditor._getSettingsProperty("background-position",d,a());g+='<div class="tdc-property-wrap tdc-bg-position tdc-dropdown-big'+k()+'" data-tdc-for="background-position">';g=g+'<div class="tdc-property-title"><span title="Css background-position">Background position<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+
('<select class="tdc-css-bg-position" '+tdcSidebarPanel._getParamterDataAtts(h,m)+' name="">');g+=tdcCssEditor._generateDropdownOptions([{value:"center top",display:"Center Top"},{value:"center center",display:"Center Center"},{value:"center bottom",display:"Center Bottom"},{value:"left top",display:"Left Top"},{value:"left center",display:"Left Center"},{value:"left bottom",display:"Left Bottom"},{value:"right top",display:"Right Top"},{value:"right center",display:"Right Center"},{value:"right bottom",
display:"Right Bottom"}],l);g+="</select></div></div>";l=tdcCssEditor._getSettingsProperty("opacity","",a());r="";n.isInherited&&(r=l,l="");g+='<div class="tdc-property-wrap tdc-opacity tdc-textfield-small'+k()+'" data-tdc-for="opacity">';g=g+'<div class="tdc-property-title"><span title="Css background-image opacity">Background opacity</span></div><div class="tdc-property">'+('<input class="tdc-css-opacity" '+tdcSidebarPanel._getParamterDataAtts(h,m)+' name="" type="text" '+c(r)+' value="'+l+'"/>');
g+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator"></div>';var v=b.uniqueId(),l=tdcCssEditor._getSettingsProperty("color-1-overlay","",a()),r="";n.isInherited&&(r=l,l="");g+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-color-1-overlay'+k()+'" data-tdc-for="color-1-overlay">';g=g+'<div class="tdc-property-title"><span title="Css gradient color From">Color 1 overlay<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property">'+
('<input class="tdc-css-color-1-overlay" '+tdcSidebarPanel._getParamterDataAtts(h,m)+tdcCssEditor._getDataNoValue(l)+' id="'+v+'" name="" type="text" '+c(r)+' value="'+l+'"/>');g+="</div></div>";tdcSidebarPanel._hook.addAction("panel_css",function(){tdcCssEditor._CsWpColorPicker(e("#"+v))});var w=b.uniqueId(),l=tdcCssEditor._getSettingsProperty("color-2-overlay","",a()),r="";n.isInherited&&(r=l,l="");g+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-color-2-overlay'+k()+'" data-tdc-for="color-2-overlay">';
g=g+'<div class="tdc-property-title"><span  title="Css gradient color To">Color 2 overlay<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property">'+('<input class="tdc-css-color-2-overlay" '+tdcSidebarPanel._getParamterDataAtts(h,m)+tdcCssEditor._getDataNoValue(l)+' id="'+w+'" name="" type="text" '+c(r)+' value="'+l+'"/>');g+="</div></div>";tdcSidebarPanel._hook.addAction("panel_css",function(){tdcCssEditor._CsWpColorPicker(e("#"+w))});
g=g+'<div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator"></div>'+('<div class="tdc-clear-css-properties" '+tdcSidebarPanel._getParamterDataAtts(h,m)+' title="Clear all tab css settings">Clear CSS settings</div>');return g+"</div>"},_getAvailableViewportSetting:function(a,c,b){if("undefined"!==typeof tdcCssEditor._currentCssSettings){var d;switch(a){case "all":"undefined"!==typeof tdcCssEditor._currentCssSettings[a]&&(d="all");break;
case "landscape":case "portrait":case "phone":"undefined"!==typeof tdcCssEditor._currentCssSettings[a]?d=a:"undefined"!==typeof tdcCssEditor._currentCssSettings.all&&(d="all")}if("undefined"!==typeof d){if("undefined"!==typeof tdcCssEditor._currentCssSettings[d][c])return tdcCssEditor._currentViewportSettings.name!==d&&(b.isInherited=!0,tdcDebug.log(c)),tdcCssEditor._cleanCss(c,tdcCssEditor._currentCssSettings[d][c]);if("all"!==d)return tdcCssEditor._getAvailableViewportSetting("all",c,b)}}},_getSettingsProperty:function(a,
c,b){var d;"undefined"===typeof b&&(b={isInherited:!1});"undefined"!==typeof tdcCssEditor._currentCssSettings&&(d=tdcCssEditor._getAvailableViewportSetting(tdcCssEditor._currentViewportSettings.name,a,b));"undefined"===typeof d&&"undefined"!==typeof c&&(d=c);return d},_generateDropdownOptions:function(a,c,d){for(var f=[],k,e=!1,n=0,g=0;g<a.length;g++)b.isUndefined(d)||d!==a[g].value||(n=g),k="",b.isUndefined(c)||c!==a[g].value||(k='selected="selected"',e=!0),f.push("<option "+k+' value="'+a[g].value+
'">'+a[g].display+"</option>");e||(f[n]='<option selected="selected" value="'+a[n].value+'">'+a[n].display+"</option>");return f.join("")},_generateCssAttValue:function(a){var c={},d=a.find(".tdc-css-box-input-margin-top").val().trim(),f=a.find(".tdc-css-box-input-margin-right").val().trim(),e=a.find(".tdc-css-box-input-margin-bottom").val().trim(),m=a.find(".tdc-css-box-input-margin-left").val().trim(),n=a.find(".tdc-css-box-input-border-top-width").val().trim(),g=a.find(".tdc-css-box-input-border-right-width").val().trim(),
l=a.find(".tdc-css-box-input-border-bottom-width").val().trim(),q=a.find(".tdc-css-box-input-border-left-width").val().trim(),r=a.find(".tdc-css-box-input-padding-top").val().trim(),u=a.find(".tdc-css-box-input-padding-right").val().trim(),v=a.find(".tdc-css-box-input-padding-bottom").val().trim(),w=a.find(".tdc-css-box-input-padding-left").val().trim(),p=a.find(".tdc-css-border-radius").val().trim(),t=a.find(".tdc-css-opacity").val().trim();""!==d&&(c["margin-top"]=d);""!==f&&(c["margin-right"]=
f);""!==e&&(c["margin-bottom"]=e);""!==m&&(c["margin-left"]=m);""!==n&&(c["border-top-width"]=n);""!==g&&(c["border-right-width"]=g);""!==l&&(c["border-bottom-width"]=l);""!==q&&(c["border-left-width"]=q);""!==r&&(c["padding-top"]=r);""!==u&&(c["padding-right"]=u);""!==v&&(c["padding-bottom"]=v);""!==w&&(c["padding-left"]=w);d=a.find(".tdc-css-border-style");f=d.val().trim();""===f||d.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(c["border-style"]=f);d=a.find(".tdc-css-border-color");
f=d.val().trim();""!==f?c["border-color"]=f:(d=d.data("no_value"),b.isUndefined(d)||1!==d||(c["border-color"]="no_value"));""!==p&&(c["border-radius"]=p);p=a.find(".tdc-css-bg-color");d=p.val().trim();""!==d?c["background-color"]=d:(p=p.data("no_value"),b.isUndefined(p)||1!==p||(c["background-color"]="no_value"));p=a.find(".tdc-css-bg-image");p.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(p=p.data("image_link"),b.isUndefined(p)||("no_value"===p?c["background-image"]=
"no_value":""!==p&&(c["background-image"]='url("'+p+'")')));p=a.find(".tdc-css-bg-style");d=p.val().trim();""===d||p.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(c["background-style"]=d);p=a.find(".tdc-css-bg-position");d=p.val().trim();""===d||p.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(c["background-position"]=d);""!==t&&(c.opacity=t);t=a.find(".tdc-css-color-1-overlay");p=t.val().trim();""!==p?c["color-1-overlay"]=p:(t=t.data("no_value"),
b.isUndefined(t)||1!==t||(c["color-1-overlay"]="no_value"));a=a.find(".tdc-css-color-2-overlay");t=a.val().trim();""!==t?c["color-2-overlay"]=t:(a=a.data("no_value"),b.isUndefined(a)||1!==a||(c["color-2-overlay"]="no_value"));b.isUndefined(tdcCssEditor._currentCssSettings)&&(tdcCssEditor._currentCssSettings={});b.isUndefined(c["border-style"])||"solid"!==c["border-style"]||("all"===tdcCssEditor._currentViewportSettings.name||b.isUndefined(tdcCssEditor._currentCssSettings.all)||b.isUndefined(tdcCssEditor._currentCssSettings.all["border-style"]))&&
delete c["border-style"];b.isUndefined(c["background-style"])||"cover"!==c["background-style"]||("all"===tdcCssEditor._currentViewportSettings.name||b.isUndefined(tdcCssEditor._currentCssSettings.all)||b.isUndefined(tdcCssEditor._currentCssSettings.all["background-style"]))&&delete c["background-style"];b.isUndefined(c["background-position"])||"center top"!==c["background-position"]||("all"===tdcCssEditor._currentViewportSettings.name||b.isUndefined(tdcCssEditor._currentCssSettings.all)||b.isUndefined(tdcCssEditor._currentCssSettings.all["background-position"]))&&
delete c["background-position"];tdcDebug.log(c);b.isEmpty(c)?(delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name],delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name+"_max_width"],delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name+"_min_width"]):(tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name]=c,b.isUndefined(tdcCssEditor._currentViewportSettings.settings)||(tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name+
"_max_width"]=tdcCssEditor._currentViewportSettings.settings.limitTop,tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name+"_min_width"]=tdcCssEditor._currentViewportSettings.settings.limitBottom));tdcDebug.log(tdcCssEditor._currentCssSettings);tdcDebug.log("JSON.stringify");tdcDebug.log(JSON.stringify(tdcCssEditor._currentCssSettings));return b.isEmpty(tdcCssEditor._currentCssSettings)?"":window.btoa(JSON.stringify(tdcCssEditor._currentCssSettings))},_getRgba:function(a){return-1!==
a.indexOf("rgb")?a:(a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a))?"rgb("+parseInt(a[1],16)+", "+parseInt(a[2],16)+", "+parseInt(a[3],16)+")":""}}})(jQuery,_);var tdcSidebarPanel={};
(function(e){tdcSidebarPanel={_defaultGroupName:"General",_currentBoundModel:e,_hook:{_hooks:[],addAction:function(b,d){_.isUndefined(tdcSidebarPanel._hook._hooks[b])&&(tdcSidebarPanel._hook._hooks[b]=[]);tdcSidebarPanel._hook._hooks[b].push(d)},doAction:function(b,d){if(!_.isUndefined(tdcSidebarPanel._hook._hooks[b]))for(var a=0;a<tdcSidebarPanel._hook._hooks[b].length;a++)tdcSidebarPanel._hook._hooks[b][a](d)},removeAction:function(b){_.isUndefined(tdcSidebarPanel._hook._hooks[b])||delete tdcSidebarPanel._hook._hooks[b]}},
init:function(){var b=jQuery("body");b.on("change focus",".tdc-tab-no-design .tdc-property-dropdown:not(.tdc-row-col-dropdown):not(.tdc-innerRow-col-dropdown) select",function(b){if("focusin"===b.type||"focus"===b.type)this.oldValue=this.value;else{var a=jQuery(this);b=a.val();var c=tdcIFrameData.getModel(a.data("model_id")),a=a.data("param_name");tdcSidebarController.onUpdate(c,a,this.oldValue,b);this.oldValue=b;"block_template_id"===a&&setTimeout(function(){tdcSidebar.setSettings({$currentRow:tdcSidebar.getCurrentRow(),
$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn(),$currentElement:tdcSidebar.getCurrentElement()},!0)},500)}});b.on("keyup focus",".tdc-tab-no-design .tdc-property-textfield input",function(b){if("focusin"===b.type)this.oldValue=this.value;else{b=jQuery(this).val();var a=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(a,jQuery(this).data("param_name"),this.oldValue,
_.escape(b));this.oldValue=b}});b.on("focus change",".tdc-tab-no-design .tdc-property-checkbox input",function(b){if("focusin"===b.type)this.oldValue=this.value;else{b=jQuery(this);var a=b.val();b.is(":checked")||(a="");var c=tdcIFrameData.getModel(b.data("model_id"));tdcSidebarController.onUpdate(c,b.data("param_name"),this.oldValue,a);this.oldValue=a}});b.on("click",".tdc-tab-no-design .tdc-image-wrap",tdcSidebarPanel.tdcImageWrapHandler);b.on("click",".tdc-tab-no-design .tdc-image-remove",tdcSidebarPanel.tdcImageRemoveHandler);
b.on("change keyup focus",".tdc-tab-no-design .tdc-property-colorpicker input",function(b){if("focusin"===b.type)this.oldValue=this.value;else{b=jQuery(this).val();var a=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(a,jQuery(this).data("param_name"),this.oldValue,b);this.oldValue=b}});b.on("change focus",".tdc-tab-no-design .tdc-row-col-dropdown select",function(b){if("focusin"===b.type||"focus"===b.type)this.oldValue=this.value;else{b=jQuery(this).val();var a=
tdcSidebar.getCurrentRow().data("model_id"),a=tdcIFrameData.getModel(a);"11"===this.oldValue&&("23_13"===b||"13_23"===b||"13_13_13"===b)||"23_13"===this.oldValue&&("11"===b||"13_23"===b||"13_13_13"===b)||"13_23"===this.oldValue&&("11"===b||"23_13"===b||"13_13_13"===b)||"13_13_13"===this.oldValue&&("11"===b||"23_13"===b||"13_23"===b)?(tdcIFrameData.changeRowModel(a,this.oldValue,b),a.getShortcodeRender(1,null,!0)):new tdcNotice.notice("Invalid row change detected: this.oldValue:"+this.oldValue+" and curValue: "+
b,!1,!0);this.oldValue=b}});b.on("change",".tdc-tab-no-design .tdc-row-col-dropdown input.tdc-property-input-radio",function(b){"undefined"!==typeof tdcSidebarPanel.timerChangingColumns&&clearTimeout(tdcSidebarPanel.timerChangingColumns);var a=jQuery(this);tdcSidebarPanel.timerChangingColumns=setTimeout(function(){var b=a.val(),d=tdcSidebar.getCurrentRow().data("model_id"),d=tdcIFrameData.getModel(d),f=d.get("childCollection");this.oldValue="11";_.isUndefined(f)||(f=tdcIFrameData.getChildCollectionWidths(f),
_.isUndefined(f)||(this.oldValue=f));"11"===this.oldValue&&("23_13"===b||"13_23"===b||"13_13_13"===b)||"23_13"===this.oldValue&&("11"===b||"13_23"===b||"13_13_13"===b)||"13_23"===this.oldValue&&("11"===b||"23_13"===b||"13_13_13"===b)||"13_13_13"===this.oldValue&&("11"===b||"23_13"===b||"13_23"===b)?(tdcIFrameData.changeRowModel(d,this.oldValue,b),d.getShortcodeRender(1,null,!0)):this.oldValue!==b&&new tdcNotice.notice("Invalid row change detected: this.oldValue:"+this.oldValue+" and curValue: "+b,
!1,!0);this.oldValue=b},300)});b.on("change focus",".tdc-tab-no-design .tdc-innerRow-col-dropdown select",function(b){if("focusin"===b.type||"focus"===b.type)this.oldValue=this.value;else{b=jQuery(this).val();var a=tdcSidebar._$currentInnerRow.data("model_id"),a=tdcIFrameData.getModel(a);tdcIFrameData.changeInnerRowModel(a,this.oldValue,b);a.getShortcodeRender(tdcIFrameData.getColumnNumber(a),null,!0);this.oldValue=b}});b.on("change",".tdc-tab-no-design .tdc-innerRow-col-dropdown input.tdc-property-input-radio",
function(b){"undefined"!==typeof tdcSidebarPanel.timerChangingInnerColumns&&clearTimeout(tdcSidebarPanel.timerChangingInnerColumns);var a=jQuery(this);tdcSidebarPanel.timerChangingInnerColumns=setTimeout(function(){var b=a.val(),d=tdcSidebar._$currentInnerRow.data("model_id"),d=tdcIFrameData.getModel(d),f=d.get("childCollection");this.oldValue="11";_.isUndefined(f)||(f=tdcIFrameData.getChildCollectionWidths(f),_.isUndefined(f)||(this.oldValue=f));tdcIFrameData.changeInnerRowModel(d,this.oldValue,
b);d.getShortcodeRender(tdcIFrameData.getColumnNumber(d),null,!0);this.oldValue=b},300)});b.on("change focus",".tdc-tab-no-design .tdc-widget-sidebar-dropdown select",function(b){if("focusin"===b.type||"focus"===b.type)this.oldValue=this.value;else{b=jQuery(this).val();var a=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(a,jQuery(this).data("param_name"),this.oldValue,b);this.oldValue=b}});b.on("click",".tdc-tab-no-design .tdc-open-wpeditor",function(b){b.preventDefault();
var a=jQuery(this);b=jQuery("#tdc-wpeditor");var c=b.children(".content"),d=a.data("mapped_parameter_name"),a=a.data("model_id"),f=tdcIFrameData.getModel(a).get("parentModel").get("attrs"),e="tdc-three-column";if(_.has(f,"width"))switch(f.width){case "1/3":e="tdc-one-column";break;case "2/3":e="tdc-two-column"}c.addClass("tdc-dropped-wpeditor");c.html('<iframe id="tdc-iframe-wpeditor" class="'+e+'" src="'+window.tdcAdminSettings.pluginUrl+'/includes/wpeditor.php" scrolling="auto" style="width: 100%; height: 100%" data-model_id="'+
a+'" data-mapped_parameter_name="'+d+'"></iframe>');b.show();tdcWindowFrame.setWindowFrame(b)});b.on("click","#tdc-wpeditor .tdc-iframe-close-button",function(b){b.preventDefault();jQuery("#tdc-wpeditor").hide()});b.on("click",".tdc-sidebar-delete-row",tdcRowHandlerUI.deleteHandler);b.on("click",".tdc-sidebar-delete-inner-row",tdcInnerRowHandlerUI.deleteHandler);b.on("click",".tdc-sidebar-clone-row",tdcRowHandlerUI.cloneHandler);b.on("click",".tdc-sidebar-clone-inner-row",tdcInnerRowHandlerUI.cloneHandler)},
tdcImageWrapHandler:function(b){var d=jQuery(b.currentTarget);d.closest(".tdc-tab-content");window.original_send_to_editor=window.send_to_editor;wp.media.editor.open(d);jQuery(".media-menu .media-menu-item:nth-of-type(2)").addClass("hidden");jQuery(".media-menu .media-menu-item:nth-of-type(3)").addClass("hidden");jQuery(".media-menu .media-menu-item:nth-of-type(4)").addClass("hidden");window.send_to_editor=function(b){var a=jQuery("img",b).attr("src"),e="";"undefined"===typeof a?(a=jQuery(b).attr("src"),
e=jQuery(b).attr("class")):e=jQuery("img",b).attr("class");jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_id","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(b){b.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_class:e,action:"tdc_ajax_get_image_id"}}).done(function(b,c,e){"success"===c&&(_.isObject(b)&&_.has(b,"errors")?new tdcNotice.notice(b.errors,!0,!1):(d.closest(".tdc-property").find(".tdc-image-remove").removeClass("tdc-hidden-button"),
d.attr("style","background-image: url( '"+a+"') "),d.data("image_link",a),d.data("image_id",b.image_id),d.removeClass("tdc-no-image-selected"),window.send_to_editor=window.original_send_to_editor,window.tb_remove(),c="",e=d.data("model_id"),e=tdcIFrameData.getModel(e),d.hasClass("tdc-no-image-selected")||(c=b.image_id.toString()),tdcSidebarController.onUpdate(e,d.data("param_name"),"",c)))}).fail(function(b,a,c){})};return!1},tdcImageRemoveHandler:function(b){var d=jQuery(b.currentTarget);b=d.closest(".tdc-property-wrap").find(".tdc-image-wrap");
d.addClass("tdc-hidden-button");b.addClass("tdc-no-image-selected");jQuery.removeData(b,"image_link");b.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'");d=b.data("model_id");d=tdcIFrameData.getModel(d);tdcSidebarController.onUpdate(d,b.data("param_name"),"","")},bindPanelToModel:function(b,d){if(_.isUndefined(tdcSidebarPanel._currentBoundModel)||tdcSidebarPanel._currentBoundModel.cid!==b.cid||!_.isUndefined(d)&&(_.isUndefined(d)||!0===
d)){var a=window.tdcAdminSettings.mappedShortcodes[b.attributes.tag];tdcSidebarPanel._deletePanel();jQuery(".tdc-empty-sidebar").hide();tdcSidebarPanel._currentBoundModel=b;for(var c=[],e=0;e<a.params.length;e++){var f=tdcSidebarPanel._defaultGroupName;_.isEmpty(a.params[e].group)||(f=a.params[e].group);c.push(f)}var c=_.uniq(c),h=f="",m=tdcSidebar.getCurrentTabId(),n,g,f=f+'<div class="tdc-tabs">';var l=g=n="";for(e=0;e<c.length;e++){h=tdcSidebarPanel._fixGroupName(c[e]);var q=tdcUtil.makeSafeForCSS(h);
0===e?(n='<a href="#" data-tab-id="td-tab-'+q+'" class="tdc-tab-active" title="'+h+' settings">'+h+"</a>",g='<a href="#" data-tab-id="td-tab-'+q+'" title="'+h+' settings">'+h+"</a>"):_.isUndefined(m)||m!=="td-tab-"+q?l+='<a href="#" data-tab-id="td-tab-'+q+'" title="'+h+' settings">'+h+"</a>":(n=g,l+='<a href="#" data-tab-id="td-tab-'+q+'" class="tdc-tab-active" title="'+h+' settings">'+h+"</a>")}f=f+(n+l)+'</div><div class="tdc-tab-content-wrap">';l=g=n="";for(e=0;e<c.length;e++)h=tdcSidebarPanel._fixGroupName(c[e]),
q=tdcUtil.makeSafeForCSS(h),h="tdc-tab-no-design","css"===q&&(h="tdc-tab-design"),0===e?(n='<div class="tdc-tab-content tdc-tab-content-visible '+h+'" id="td-tab-'+q+'">',g='<div class="tdc-tab-content '+h+'" id="td-tab-'+q+'">'):_.isUndefined(m)||m!=="td-tab-"+q?l+='<div class="tdc-tab-content '+h+'" id="td-tab-'+q+'">':(n=g,l+='<div class="tdc-tab-content tdc-tab-content-visible '+h+'" id="td-tab-'+q+'">'),l+=tdcSidebarPanel._bindGroupAndGetHtml(c[e],a,b),q=' data-model_id="'+b.cid+'" ',"vc_row"===
b.attributes.tag?(l+='<div class="tdc-sidebar-row-buttons">',l+='<div class="tdc-sidebar-button tdc-sidebar-delete-row" '+q+' title="Delete the current selected Row">Delete Row</div>',l+='<div class="tdc-sidebar-button tdc-sidebar-clone-row" '+q+' title="Make a copy of the current selected Row. The copy will appear below the current Row">Clone Row</div>',l+="</div>"):"vc_row_inner"===b.attributes.tag&&(l+='<div class="tdc-sidebar-row-buttons">',l+='<div class="tdc-sidebar-button tdc-sidebar-delete-inner-row" '+
q+' title="Delete the current selected Inner Row">Delete Inner Row</div>',l+='<div class="tdc-sidebar-button tdc-sidebar-clone-inner-row" '+q+' title="Make a copy of the current selected Inner Row. The copy will appear below the current Inner Row">Clone Inner Row</div>',l+="</div>"),l+="</div>";f=f+(n+l)+"</div>";jQuery(".tdc-inspector .tdc-tabs-wrapper").html(f);jQuery(".tdc-inspector-wrap").addClass("tdc-inspector-active");jQuery(".tdc-breadcrumbs").show();tdcSidebarPanel._hook.doAction("panel_rendered");
tdcSidebarPanel._hook.doAction("panel_css");(function(){if("vc_row"===b.get("tag")){var a=jQuery("body .tdc-row-col-dropdown select"),c=jQuery("body .tdc-row-stretch-dropdown select"),d=b.get("childCollection");if(!_.isUndefined(d)){d=tdcIFrameData.getChildCollectionWidths(d);_.isUndefined(d)&&(d="11");a.length?a.val(d):(a=jQuery("body .tdc-row-col-dropdown input[value='"+d+"']"),a.length&&a.attr("checked","checked"));var a=b.get("attrs");if(_.has(a,"full_width"))var f=a.full_width;_.isUndefined(f)&&
(f="");c.val(f)}}})();(function(){if("vc_row_inner"===b.get("tag")){var a=jQuery("body .tdc-innerRow-col-dropdown select"),c=b.get("childCollection");if(!_.isUndefined(c)){c=tdcIFrameData.getChildCollectionWidths(c);_.isUndefined(c)&&(c="11");var d=b.get("parentModel").get("attrs"),f="";_.has(d,"width")&&(f=d.width.replace("/",""));if(a.length)switch(a.val(c),f){case "":a.find("option[value=12_12]").hide();a.find("option[value=23_13]").show();a.find("option[value=13_23]").show();a.find("option[value=13_13_13]").show();
break;case "13":a.find("option[value=12_12]").hide();a.find("option[value=23_13]").hide();a.find("option[value=13_23]").hide();a.find("option[value=13_13_13]").hide();break;case "23":a.find("option[value=12_12]").show(),a.find("option[value=23_13]").hide(),a.find("option[value=13_23]").hide(),a.find("option[value=13_13_13]").hide()}else if(a=jQuery('body .tdc-innerRow-col-dropdown input[value="'+c+'"]'),a.length)switch(a.attr("checked","checked"),a.next("label").show(),f){case "":a.parent().find("input[value=12_12] + label").hide();
a.parent().find("input[value=23_13] + label").show();a.parent().find("input[value=13_23] + label").show();a.parent().find("input[value=13_13_13] + label").show();break;case "13":a.parent().find("input[value=12_12] + label").hide();a.parent().find("input[value=23_13] + label").hide();a.parent().find("input[value=13_23] + label").hide();a.parent().find("input[value=13_13_13] + label").hide();break;case "23":a.parent().find("input[value=12_12] + label").show(),a.parent().find("input[value=23_13] + label").hide(),
a.parent().find("input[value=13_23] + label").hide(),a.parent().find("input[value=13_13_13] + label").hide()}}}})()}},_bindGroupAndGetHtml:function(b,d,a){var c="",e=window.tdcAdminSettings.mappedBlockTemplates,f=a.get("attrs");if(_.has(f,"block_template_id")&&!_.isEmpty(f.block_template_id)){for(var f=f.block_template_id,h,m,n,g=0;g<d.params.length;g++)"custom_title"===d.params[g].param_name?h=g:"custom_url"===d.params[g].param_name?m=g:"block_template_id"===d.params[g].param_name&&(n=g);_.isUndefined(h)||
(b===tdcSidebarPanel._defaultGroupName?_.isEmpty(d.params[h].group)&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[h],a)):d.params[h].group===b&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[h],a)));_.isUndefined(m)||(b===tdcSidebarPanel._defaultGroupName?_.isEmpty(d.params[m].group)&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[m],a)):d.params[m].group===b&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[m],a)));_.isUndefined(n)||(b===tdcSidebarPanel._defaultGroupName?_.isEmpty(d.params[n].group)&&
(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[n],a)):d.params[n].group===b&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[n],a)));for(g=0;g<e[f].params.length;g++)b===tdcSidebarPanel._defaultGroupName?_.isEmpty(e[f].params[g].group)&&(c+=tdcSidebarPanel._bindParamAndGetHtml(e[f].params[g],a)):e[f].params[g].group===b&&(c+=tdcSidebarPanel._bindParamAndGetHtml(e[f].params[g],a));for(g=0;g<d.params.length;g++)_.isEmpty(d.params[g].td_type)&&"custom_title"!==d.params[g].param_name&&"custom_url"!==
d.params[g].param_name&&"block_template_id"!==d.params[g].param_name&&(b===tdcSidebarPanel._defaultGroupName?_.isEmpty(d.params[g].group)&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[g],a)):d.params[g].group===b&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[g],a)))}else for(g=0;g<d.params.length;g++)b===tdcSidebarPanel._defaultGroupName?_.isEmpty(d.params[g].group)&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[g],a)):d.params[g].group===b&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[g],
a));return c},_bindParamAndGetHtml:function(b,d){switch(b.type){case "colorpicker":return tdcSidebarPanel.addColorpicker(b,d);case "dropdown":return tdcSidebarPanel.addDropDown(b,d);case "checkbox":return tdcSidebarPanel.addCheckBox(b,d);case "attach_image":return tdcSidebarPanel.addUploadImage(b,d);case "textfield":return tdcSidebarPanel.addTextField(b,d);case "textarea_html":return tdcSidebarPanel.addTextAreaHtml(b,d);case "textarea_raw_html":return tdcSidebarPanel.addTextAreaRawHtml(b,d);case "css_editor":return"";
case "tdc_css_editor":return tdcCssEditor.init(),tdcCssEditor.addComposerCssEditor(b,d);case "horizontal_separator":return tdcSidebarPanel.addSeparatorHorizontal(b,d);default:return b.param_name+" - "+b.type+"<br>"}},_deletePanel:function(){tdcDebug.log("clear _deletePanel ");tdcSidebarPanel._hook._hooks=[];tdcSidebarPanel._currentBoundModel=e;jQuery(".tdc-breadcrumbs").hide();jQuery(".tdc-inspector .tdc-current-element-head").empty();jQuery(".tdc-inspector .tdc-tabs-wrapper").empty();jQuery(".tdc-inspector-wrap").removeClass("tdc-inspector-active");
jQuery(".tdc-empty-sidebar").show();tdcSidebar.$_currentElementSiblings.removeClass("tdc-current-element-siblings-visible");tdcSidebar.$_currentElementHead.removeClass("tdc-current-element-siblings-button-on");tdcSidebar.hideWpeditor()},_getParameterClasses:function(b){var d="tdc-property-wrap tdc-property-"+b.type;d+=" tdc-property-"+b.param_name;_.isUndefined(b["class"])||(d+=" "+b["class"]);return d},_getParameterCurrentValue:function(b,d){return _.isEmpty(d.get("attrs")[b.param_name])?"dropdown"===
b.type||_.isEmpty(b.value)?"":b.value:d.get("attrs")[b.param_name]},_getParameterDomName:function(b){return"tdc-param-"+b.param_name},_getParamterDataAtts:function(b,d){var a="";if("undefined"===typeof d)return a;a+=' data-model_id="'+d.cid+'"';"undefined"!==typeof b&&(a+=' data-param_name="'+b.param_name+'"');return a},_fixGroupName:function(b){switch(b){case "Design options":return"Css";case "Pagination":return"Extra";case "Ajax filter":return"Ajax"}return b},clearPanel:function(){tdcSidebarPanel._deletePanel()},
addColorpicker:function(b,d){var a="";_.has(b,"description")&&""!==b.description&&(a=' title="'+b.description+'" ');var c="",e=_.uniqueId(),c=c+('<div class="'+tdcSidebarPanel._getParameterClasses(b)+'">'),c=c+('<div class="tdc-property-title"><span'+a+">"+b.heading+"</span></div>"),c=c+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(b,d)+' id="'+e+'" name="'+tdcSidebarPanel._getParameterDomName(b)+'" type="text" value="'+tdcSidebarPanel._getParameterCurrentValue(b,d)+
'"/>'),c=c+"</div></div>";tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery("#"+e).cs_wpColorPicker()});return c},addDropDown:function(b,d){var a=!0;_.has(b,"tdc_dropdown_images")&&""!==b.tdc_dropdown_images&&(a=!1);for(var c="",e="",f=Object.keys(b.value),h=0;h<f.length;h++){var m=b.value[f[h]],n=tdcSidebarPanel._getParameterCurrentValue(b,d),g="";a?(String(n)===String(m)&&(g=' selected="selected" '),e+="<option "+g+' value="'+m+'">'+f[h]+"</option>"):(String(n)===String(m)&&(g=
" checked "),n=_.uniqueId(),e+='<input class="tdc-property-input-radio" type="radio" id="'+n+'" name="'+tdcSidebarPanel._getParameterDomName(b)+'" '+g+' value="'+m+'">',e+='<label class="tdc-property-input-radio-label" for="'+n+'" title="'+f[h]+'"><div class="col_'+String(m)+'"></div></label>')}f="";_.has(b,"description")&&""!==b.description&&(f=' title="'+b.description+'" ');c+='<div class="'+tdcSidebarPanel._getParameterClasses(b)+'">';c+='<div class="tdc-property-title"><span'+f+">"+b.heading+
"</span></div>";c+='<div class="tdc-property">';a?(c+="<select "+tdcSidebarPanel._getParamterDataAtts(b,d)+' name="'+tdcSidebarPanel._getParameterDomName(b)+'">',c=c+e+"</select>"):c+=e;return c+"</div></div>"},addCheckBox:function(b,d){var a="";_.has(b,"description")&&""!==b.description&&(a=' title="'+b.description+'" ');var c="";""!==tdcSidebarPanel._getParameterCurrentValue(b,d)&&(c=" checked ");var e=""+('<div class="'+tdcSidebarPanel._getParameterClasses(b)+'">');e+='<div class="tdc-property-title"><span'+
a+">"+b.heading+"</span></div>";e=e+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(b,d)+' name="'+tdcSidebarPanel._getParameterDomName(b)+'" type="checkbox" value="yes" '+c+"/>");return e+"</div></div>"},addUploadImage:function(b,d){var a="";_.has(b,"description")&&""!==b.description&&(a=' title="'+b.description+'" ');var c=""+('<div class="'+tdcSidebarPanel._getParameterClasses(b)+'">');c+='<div class="tdc-property-title"><span'+a+">"+b.heading+"</span></div>";c=c+'<div class="tdc-property">'+
('<div class="tdc-image-wrap tdc-no-image-selected" '+tdcSidebarPanel._getParamterDataAtts(b,d)+" style=\"background-image: url('"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png')\">");c+='</div><a class="tdc-image-remove tdc-hidden-button" href="#" >Remove</a></div></div>';tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery(".tdc-image-wrap").each(function(a,c){var f=jQuery(c);if(!f.parent().parent(".tdc-bg-upload").length&&b.param_name===f.data("param_name")){var e=
tdcSidebarPanel._getParameterCurrentValue(b,d);""!==e&&jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_url","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_id:e,action:"tdc_ajax_get_image_url"}}).done(function(a,b,c){"success"===b&&(_.isObject(a)&&_.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):(f.attr("style","background-image: url('"+a.image_url+
"')").removeClass("tdc-no-image-selected"),f.data("image_link",a.image_url),f.data("image_id",e),f.closest(".tdc-property").find(".tdc-image-remove").removeClass("tdc-hidden-button")))}).fail(function(a,b,c){})}})});return c},addTextArea:function(){},addTextField:function(b,d){var a="",c="";if(_.has(b,"description")&&""!==b.description){var e=jQuery("<div>"+b.description+"</div>");b.description===e.text()?a=' title="'+b.description+'" ':c='<div class="tdc-description">'+b.description+"</div>"}e=""+
('<div class="'+tdcSidebarPanel._getParameterClasses(b)+'">');e+='<div class="tdc-property-title"><span'+a+">"+b.heading+"</span></div>";e=e+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(b,d)+' name="'+tdcSidebarPanel._getParameterDomName(b)+'" type="text" value="'+tdcSidebarPanel._getParameterCurrentValue(b,d)+'"/>');return e=e+c+"</div></div>"},addTextAreaHtml:function(b,d){_.has(b,"description");var a='<a href="#" class="tdc-open-wpeditor" data-model_id="'+d.cid+
'" data-mapped_parameter_name="'+b.param_name+'">Edit Content</a>';tdcSidebarPanel._hook.addAction("panel_rendered",function(){});return a},addTextAreaRawHtml:function(b,d){var a=_.uniqueId("tdc_textarea_"),c="";_.has(b,"description")&&""!==b.description&&(c=' title="'+b.description+'" ');var e=""+('<div class="'+tdcSidebarPanel._getParameterClasses(b)+'">');e+='<div class="tdc-property-title"><span'+c+">"+b.heading+"</span></div>";e=e+'<div class="tdc-property">'+('<textarea id="'+a+'" class="tdc-textarea" '+
tdcSidebarPanel._getParamterDataAtts(b,d)+">"+tdcSidebarPanel._getParameterCurrentValue(b,d)+"</textarea>");e+="</div></div>";jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/decode_html_content","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{post_id:window.tdcPostSettings.postId,action:"tdc_ajax_decode_html_content",content:tdcSidebarPanel._getParameterCurrentValue(b,
d)}}).done(function(b,c,d){"success"===c&&(_.isObject(b)&&_.has(b,"errors")?new tdcNotice.notice(b.errors,!0,!1):jQuery("#"+a).html(b.parsed_content).show())}).fail(function(a,b,c){});jQuery("body").on("keyup","#"+a,function(a){a=jQuery(a.target);var b=tdcIFrameData.getModel(a.data("model_id")),c=window.btoa(a.val());tdcSidebarController.onUpdate(b,a.data("param_name"),c,c)});return e},addSeparatorHorizontal:function(b,d){return""+('<div class="tdc-sidebar-horizontal-separator '+tdcSidebarPanel._getParameterClasses(b)+
'"></div>')}}})();var tdcUtil={};(function(){tdcUtil={getRestEndPoint:function(e,b){return _.isEmpty(window.tdcAdminSettings.permalinkStructure)?window.tdcAdminSettings.wpRestUrl+e+"&"+b:window.tdcAdminSettings.wpRestUrl+e+"?"+b},makeSafeForCSS:function(e){return e.replace(/[^a-z0-9]/g,function(b){var d=b.charCodeAt(0);return 32===d?"-":65<=d&&90>=d?b.toLowerCase():"__"+("000"+d.toString(16)).slice(-4)})}}})();var tdcJobManager={};
(function(){tdcJobManager={_sentJobs:{},totalJobsCount:0,job:function(){this.shortcode="";this.columns=0;this.error_callback=this.success_callback=this.blockUid=""},jobRequest:function(e){this.shortcode=e.shortcode;this.columns=e.columns;this.jobId=tdcJobManager._generateJobId();this.postId=window.tdcPostSettings.postId;this.replyHtml=""},addJob:function(e){tdcMain.setContentModified();tdcDebug.group("%c tdcJobManager.addJob","background-color:#2489c2; color:white");var b=new tdcJobManager.jobRequest(e);
jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/do_job","tmp_jobId="+b.jobId+"&tmp_blockUid="+b.blockUid+"&uuid="+tdcJobManager._getUniqueID()),beforeSend:function(b){b.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},cache:!1,data:b,dataType:"json",statusCode:{404:function(){console.log("tdcJobManager.addJob - ERROR: 404 not found")},500:function(){console.log("tdcJobManager.addJob - ERROR: 500 server error")}},success:function(d,a,c){null===d?e.error(b,
"tdcJobManager.addJob - ERROR: Empty response received from server"):(!0===tdcJobManager._isJobCallbackReplyValid(e.blockUid,d.jobId)?e.success_callback(d):tdcDebug.log("tdcJobManager.addJob - dropped job :) (probably it's older than the last timestamp)"),tdcDebug.groupEnd())},error:function(d,a,c){e.error_callback(b,"tdcJobManager.addJob - Error callback - textStatus: "+a+" errorThrown: "+c);tdcDebug.groupEnd()}})},_isJobCallbackReplyValid:function(e,b){return"undefined"===typeof tdcJobManager._sentJobs[e]||
parseInt(tdcJobManager._sentJobs[e])<parseInt(b)?(tdcJobManager._sentJobs[e]=b,!0):!1},_generateJobId:function(){var e=tdcJobManager.totalJobsCount;tdcJobManager.totalJobsCount++;return e},_getUniqueID:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}})();
